<!-- Header (Topbar + Navbar) -->
<header class="cs-header">

  <!-- Navbar -->
  <!-- Remove "navbar-sticky" class to make navigation bar scrollable with the page -->

  <div class="cintillo" style="position: relative;  z-index: 99;">
    <a id="cint-principal-1" style="margin:auto;display:block;" [routerLink]="['/']" class="Cintillo Top: Única">
      <picture>
        <source media="(max-width: 800px)">
        <img src="assets/img/oferta.jpg" style="width: 100vw ;">
      </picture>
    </a>
  </div>

  <div class="py-2 navbar navbar-expand-lg navbar-light bg-light navbar-sticky" data-fixed-element>
    <div class="container px-0 px-xl-3">
      <a [routerLink]="['/']" class="mr-0 navbar-brand order-lg-1 pr-lg-3 mr-lg-4">
        <img src="assets/img/logo-blanco.png" alt="Logo Ferri" width="110">
      </a>
      <!-- Search desktop -->
      <div class="ml-4 input-group-overlay d-lg-block d-none order-lg-1" style="max-width: 21rem;">
        <input class="form-control appended-form-control" type="text" placeholder="¿Qué buscas?"
          style="border-radius: 19px !important;">
        <div class="input-group-append-overlay">
          <span class="input-group-text"><i class="align-middle cxi-search lead"></i></span>
        </div>
      </div>

      <!-- Toolbar -->
      <div class="d-flex align-items-center order-lg-3">
        <ul class="nav nav-tools flex-nowrap">
          <li class="mb-0 nav-item d-lg-block d-none">
            <a [routerLink]="['/login']" class="text-white nav-tool dropdown-toggle row" style="align-items: center;">
              <i class="mr-2 text-white fas fa-map-marker-alt" style="font-size: 20px;"></i>
              <span class="">
                <span>Selecciona</span>
                <span style="font-weight: 700; font-size: 105%; font-style: normal; display: block;">tu
                  ubicación</span>
              </span>
            </a>
          </li>

          <ng-container *ngIf="user_ls==undefined">
            <li class="mb-0 nav-item d-lg-flex align-items-center d-none">
              <a [routerLink]="['/login']" class="text-white nav-tool dropdown-toggle ">
                <!-- <i class="text-white cxi-profile nav-tool-icon"></i> -->
                <i class="text-white fas fa-user" style="font-size: 20px;"></i>
                <span class="text-white nav-tool-label">Iniciar Sesión</span>
              </a>
            </li>
          </ng-container>
          <ng-container *ngIf="user_ls">
            <li class="nav-item d-lg-block d-none dropdown">
              <a class="text-white dropdown-toggle nav-tool" data-toggle="dropdown" style="cursor: pointer;">
                <i class="text-white cxi-profile nav-tool-icon"></i>
                <span class="text-white nav-tool-label">{{user_ls.nick}}</span>
              </a>
              <div class="dropdown-menu">

                <a [routerLink]="['/cuenta/perfil']" routerLinkActive="active" class="dropdown-item">
                  <i class="ci-profile me-2"></i>
                  Perfil
                  <!-- <span class="badge rounded-pill bg-danger ms-2">3</span> -->
                </a>
                <a href="#" class="dropdown-item">
                  <i class="ci-comment me-2"></i>
                  Messages
                  <span class="badge rounded-pill bg-success ms-2">5</span>
                </a>
                <a (click)="logout()" class="dropdown-item" style="cursor: pointer;">
                  <i class="ci-logout me-2"></i>
                  Cerrar Sesión
                  <!-- <span class="badge rounded-pill bg-warning ms-2">1</span> -->
                </a>
              </div>
            </li>
          </ng-container>


          <li class="mb-0 divider-vertical d-lg-block d-none"></li>
          <li class="mb-0 nav-item align-self-center" *ngIf="user_ls !=undefined">
            <a style="cursor:pointer;" class="nav-tool pr-lg-0" (click)="open_modal_cart()">
              <i class="text-white cxi-cart nav-tool-icon"></i>
              <span
                class="px-2 py-1 ml-2 align-middle badge badge-success mt-n1 font-size-xs">{{data_carrito_compras.length}}</span>
            </a>
          </li>
          <li class="mb-0 nav-item align-self-center" *ngIf="user_ls ==undefined">
            <a style="cursor:pointer;" class="nav-tool pr-lg-0" [routerLink]="['/login']">
              <i class="text-white cxi-cart nav-tool-icon"></i>
              <span class="px-2 py-1 ml-2 align-middle badge badge-success mt-n1 font-size-xs">0</span>
            </a>
          </li>
          <li class="mb-0 divider-vertical d-lg-none d-block"></li>
          <li class="mb-0 nav-item">
            <button class="navbar-toggler mt-n1 mr-n3" type="button" data-toggle="collapse"
              data-target="#navbarCollapse" aria-expanded="false">
              <span class="navbar-toggler-icon"></span>
            </button>
          </li>
        </ul>
      </div>
      <!-- Navbar collapse -->
      <nav class="collapse navbar-collapse order-lg-2" id="navbarCollapse">
        <!-- Search mobile -->
        <div class="mb-0 input-group-overlay form-group d-lg-none d-block">
          <input type="text" class="border-0 form-control prepended-form-control rounded-0"
            placeholder="Buscar producto">
          <div class="input-group-prepend-overlay">
            <span class="input-group-text">
              <i class="align-middle cxi-search font-size-lg mt-n1"></i>
            </span>
          </div>
        </div>


        <!-- Menu -->
        <ul class="mr-auto navbar-nav bg-dark d-flex d-lg-none">
          <li class="py-0 my-0 nav-item dropdown mega-dropdown" *ngFor="let principal of categorias">
            <a [routerLink]=" ['/categoria/', principal.id]" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: true}" class="text-center text-white nav-link"
              (click)="pintarNavSelected()" data-toggle="dropdown">{{principal.name}}</a>
            <div class="dropdown-menu bg-light">
              <div class="container pt-lg-1 pb-lg-3">
                <div class="row">
                  <div class="py-2 col-12 col-sm-6 " *ngFor="let sub of principal.categorias">
                    <h4 class="pt-1 mb-2 font-size-sm text-uppercase">{{sub.name}}</h4>
                    <ul class="list-unstyled">
                      <li *ngFor="let px of sub.productos"><a href="#" class="dropdown-item text-dark">{{px.name}}</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>

        <!-- <ul class="mr-auto navbar-nav">
          <li class="nav-item dropdown">
            <a [routerLink]="['/productos']" routerLinkActive="active" class="nav-link dropdown-toggle"
              data-toggle="dropdown">Tienda</a>
            <ul class="dropdown-menu">
              <li *ngFor="let category of categorias;">
                <a [routerLink]="['/productos/categoria/', category.id]" class="dropdown-item">
                  <i class="cxi-profile"></i> &nbsp;
                  {{category.name}}
                </a>
              </li>
            </ul>
          </li> -->
        <!-- <li class="nav-item">
            <a [routerLink]="['/contacto']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
              class="nav-link">Contacto</a>
          </li> -->
        <!-- <li class="nav-item dropdown mega-dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Megamenu</a>
            <div class="dropdown-menu">
              <div class="container pt-lg-1 pb-lg-3">
                <div class="row">
                  <div class="py-2 col-lg-2 col-md-3">
                    <ul class="list-unstyled">
                      <li><a href="#" class="dropdown-item">New collection</a></li>
                      <li><a href="#" class="dropdown-item">Best sellers</a></li>
                      <li><a href="#" class="dropdown-item">Plus size</a></li>
                      <li><a href="#" class="dropdown-item text-danger">Sale up to 70%</a></li>
                    </ul>
                  </div>
                  <div class="py-2 col-lg-2 col-md-3">
                    <h4 class="pt-1 mb-2 font-size-sm text-uppercase">Clothes</h4>
                    <ul class="list-unstyled">
                      <li><a href="#" class="dropdown-item">Coats</a></li>
                      <li><a href="#" class="dropdown-item">Jackets</a></li>
                      <li><a href="#" class="dropdown-item">Suits</a></li>
                      <li><a href="#" class="dropdown-item">Dresses</a></li>
                      <li><a href="#" class="dropdown-item">Cardigans &amp; sweaters</a></li>
                      <li><a href="#" class="dropdown-item">Sweatshirts &amp; hoodies</a></li>
                      <li><a href="#" class="dropdown-item">T-shirts &amp; tops</a></li>
                      <li><a href="#" class="dropdown-item">Pants</a></li>
                      <li><a href="#" class="dropdown-item">Jeans</a></li>
                      <li><a href="#" class="dropdown-item">Shorts</a></li>
                      <li><a href="#" class="dropdown-item">Skirts</a></li>
                      <li><a href="#" class="dropdown-item">Lingerie &amp; nightwear</a></li>
                      <li><a href="#" class="dropdown-item">Sportswear</a></li>
                    </ul>
                  </div>
                  <div class="py-2 col-lg-2 col-md-3">
                    <h4 class="pt-1 mb-2 font-size-sm text-uppercase">Shoes</h4>
                    <ul class="list-unstyled">
                      <li><a href="#" class="dropdown-item">Boots</a></li>
                      <li><a href="#" class="dropdown-item">Flat shoes</a></li>
                      <li><a href="#" class="dropdown-item">Heels</a></li>
                      <li><a href="#" class="dropdown-item">Sandals</a></li>
                      <li><a href="#" class="dropdown-item">Mules</a></li>
                      <li><a href="#" class="dropdown-item">Sliders</a></li>
                      <li><a href="#" class="dropdown-item">Slippers</a></li>
                      <li><a href="#" class="dropdown-item">Sneakers</a></li>
                      <li><a href="#" class="dropdown-item">Leather</a></li>
                    </ul>
                  </div>
                  <div class="py-2 col-lg-2 col-md-3">
                    <h4 class="pt-1 mb-2 font-size-sm text-uppercase">Accessories</h4>
                    <ul class="list-unstyled">
                      <li><a href="#" class="dropdown-item">Bags &amp; backpacks</a></li>
                      <li><a href="#" class="dropdown-item">Hats &amp; scarves</a></li>
                      <li><a href="#" class="dropdown-item">Hair accessories</a></li>
                      <li><a href="#" class="dropdown-item">Belts</a></li>
                      <li><a href="#" class="dropdown-item">Jewellery</a></li>
                      <li><a href="#" class="dropdown-item">Watches</a></li>
                      <li><a href="#" class="dropdown-item">Sunglasses</a></li>
                      <li><a href="#" class="dropdown-item">Purses</a></li>
                      <li><a href="#" class="dropdown-item">Socks &amp; tights</a></li>
                    </ul>
                  </div>
                  <div class="py-2 col-lg-1 d-none d-lg-block">
                    <span class="mx-auto divider-vertical h-100"></span>
                  </div>
                  <div class="py-2 col-lg-3 d-none d-lg-block">
                    <a href="#" class="pt-1 d-block text-decoration-none">
                      <img src="assets/img/ecommerce/megamenu.jpg" class="mb-3 rounded d-block" alt="Promo banner">
                      <h5 class="mb-3 font-size-sm">Back to school. Sale up to 50%</h5>
                      <div class="btn btn-outline-primary btn-sm">
                        See offers
                        <i class="ml-1 cxi-arrow-right"></i>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </li> -->

        <!-- </ul> -->
      </nav>
    </div>
  </div>
</header>


<!-- Dark navbar (change to .container-fluid for full width navbar) -->
<div class="py-0 navbar navbar-expand-lg navbar-dark navbar-fixed-top sticky-top d-none d-lg-flex"
  style="background-color: #4E4E4E;">
  <div class="container px-0 px-xl-3 row col-12 justify-content-center">
    <ul class="nav nav-category">
      <li class="py-0 my-0 nav-item dropdown mega-dropdown" *ngFor="let principal of categorias">
        <a id="{{principal.id}}" [routerLink]=" ['/categoria/', principal.id]" routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: true}" class="text-center nav-link d-flex" data-toggle="dropdown"
          style="align-items: center;">
          <!-- <i class="mb-1 cxi-profile nav-tool-icon "></i> -->
          <i class="mr-2 fas fa-wrench"></i>
          <span>
            {{principal.name}}
          </span>


        </a>
        <div class=" dropdown-menu">
          <div class="container pt-lg-1 pb-lg-3">
            <div class="row justify-content-center">
              <div class="py-2 col-md-3" *ngFor="let sub of principal.categorias">
                <a [routerLink]=" ['/productos/categoria/', principal.id, sub.id]"
                  class="pt-1 mb-2 font-size-sm text-uppercase">{{sub.name}}</a>
                <ul class="list-unstyled">
                  <li *ngFor="let sc of sub.subCategorias">
                    <a [routerLink]=" ['/productos/categoria/', principal.id, sub.id, sc.id]"
                      class="p-0 dropdown-item text-dark" style="white-space: normal !important;">{{sc.name}} </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>



<div id="cart" class="cs-offcanvas cs-offcanvas-right">

  <!-- Header -->
  <div class="cs-offcanvas-cap align-items-center border-bottom">
    <h2 class="mb-0 h5">Mi carrito</h2>
    <button class="close mr-n1" type="button" data-dismiss="offcanvas" aria-label="Close" (click)="open_modal_cart()">
      <span class="mb-0 h3 font-weight-normal" aria-hidden="true">×</span>
    </button>
  </div>

  <!-- Body -->
  <div class="cs-offcanvas-body">
    <!-- Item -->
    <div class="p-4 media border-bottom mx-n4" *ngFor="let item of data_carrito_compras">
      <a [routerLink]="['/productos', item.producto]" target="_blank" style="min-width: 80px;">
        <img src={{item.ruta}} width="80" alt="Product thumb">
      </a>
      <div class="pl-3 media-body">
        <div class="d-flex justify-content-between">
          <div class="pr-2">
            <h3 class="mb-3 font-size-sm">
              <a [routerLink]="['/productos', item.producto]" target="_blank"
                class="nav-link font-weight-bold">{{item.name}}</a>
            </h3>
            <ul class="mb-2 list-unstyled font-size-xs mt-n2">
              <li class="mb-0"><span class="text-muted">{{item.titulo_variedad}}:</span> {{item.variedad}}</li>
            </ul>
            <div class="d-flex align-items-center">
              <input type="number" class="mr-3 form-control form-control-sm bg-light" style="width: 4.5rem;"
                value="{{item.cantidad}}" readonly>
              <!-- <div class="text-nowrap"><strong class="text-danger">S/.{{item.precio}}</strong>  -->
              <span class="font-size-xs text-muted" style="font-size: 1.2rem !important;">S/.{{item.precio}}</span>
            </div>
            <button class="px-0 pb-0 btn btn-link btn-sm text-decoration-none">
              Mover a
              <i class="ml-1 cxi-heart"></i>
            </button>
          </div>
          <div class="nav-muted mr-n2">
            <a (click)="eliminar_item(item.id)" class="px-2 nav-link mt-n2" data-toggle="tooltip" title="Quitar"
              style="cursor: pointer;"><i class="cxi-delete"></i></a>
          </div>
        </div>
      </div>
    </div>

    <!-- Item -->
    <!-- <div class="p-4 media mx-n4">

    </div> -->
  </div>

  <!-- Footer -->
  <div class="cs-offcanvas-cap flex-column border-top">
    <div class="pb-1 mb-3 d-flex align-items-center justify-content-between">
      <span class="mr-2 text-muted">Subtotal:</span>
      <span class="mb-0 h5">S/.{{subtotal}}</span>
    </div>
    <a [routerLink]="['/carrito']" class="btn btn-primary btn-lg btn-block">
      <i class="mr-1 cxi-credit-card font-size-lg mt-n1"></i>
      Checkout
    </a>
  </div>
</div>
